<nav class="navbar sticky-top navbar-expand-sm navbar-light myNav" *ngIf="isLoggedIn">
  <a routerLink="/products" class="navbar-brand text-dark title"><img src="/assets/buy-button.svg" width="30" height="30" class="d-inline-block align-top" alt="">
    eStore!</a>
  <button (click)="isMenuCollapsed = !isMenuCollapsed" class="navbar-toggler" type="button" data-toggle="collapse"
          data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false"
          aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div [ngbCollapse]="isMenuCollapsed" class="collapse navbar-collapse" id="navbarNavDropdown">
    <ul class="navbar-nav">
      <li class="nav-item" *ngIf="hasRole('ADMIN')">
        <a routerLink="/administrator-panel" class="nav-link text-dark"><img src="/assets/admin.svg" width="20" height="25" class="d-inline-block align-content-center" alt=""> Administrator</a>
      </li>
    </ul>
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a (click)="open(content, currentUser.id)" class="nav-link text-dark"><img src="/assets/exit.svg" width="20" height="25" class="d-inline-block align-content-center" alt=""> Logout</a>
      </li>
      <li ngbDropdown class="nav-item dropdown">
        <a ngbDropdownToggle class="nav-link text-dark dropdown-toggle" id="navbarDropdownMenuLink"
           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="cursor: pointer;">
          <img src="/assets/avatar.svg" width="20" height="25" class="d-inline-block align-top" alt=""> {{currentUser.email}}
        </a>
        <div ngbDropdownMenu class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
          <a ngbDropdownItem class="dropdown-item" (click)="viewProfile()" style="cursor: pointer">View Your Profile</a>
          <a ngbDropdownItem class="dropdown-item"  (click)="editProfile()" style="cursor: pointer">Edit Your Profile</a>
          <a ngbDropdownItem class="dropdown-item"  (click)="goToShoppingCart()" style="cursor: pointer">View Your Cart</a>
        </div>
      </li>
    </ul>
  </div>
</nav>

<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Logout</h4>
    <button class="btn btn-outline-light" (click)="modal.dismiss()">X
    </button>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-12 text-center">
        Are you sure you want to log out?
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" ngbAutofocus class="btn btn-danger" (click)="modal.close()">Log out</button>
  </div>
</ng-template>

<nav class="navbar sticky-top navbar-expand-sm navbar-light myNav" *ngIf="!isLoggedIn">
  <a routerLink="/products" class="navbar-brand text-dark title"><img src="/assets/buy-button.svg" width="30" height="30" class="d-inline-block align-top" alt="">
    eStore!</a>
    <button (click)="isMenuCollapsed = !isMenuCollapsed" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false"
            aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
</nav>
